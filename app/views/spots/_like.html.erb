<% if user_signed_in? %>

  <% if @spot.liked_by?(current_user) %>
    <li>
      <%= link_to spot_spot_likes_path(@spot), method: :delete do %>
      <span class="button">ここ良いね！</span>
        <i class="fa fa-heart" aria-hidden="true" style="color: red;"></i>
        <%= @spot.spot_likes.count %> ここ、いいね！
      <% end %>
    </li>
  <% else %>
    <li>
      <%= link_to spot_spot_likes_path(@spot), method: :post do %>
      <span class="button">ここ良いね！</span>
        <i class="fa fa-heart-o" aria-hidden="true"></i>
        <%= @spot.spot_likes.count %> ここ、いいね！
      <% end %>
    </li>
  <% end %>

<% else %>

  <% if @spot.spot_likes.where(remote_ip: request.remote_ip).exists? %>
    <li>
      <%= link_to destroy_spot_remote_ip_likes_path(@spot, spot_id: @spot.id) do %>
        <i class="fa fa-heart" aria-hidden="true" style="color: red;"></i>
        <%= @spot.spot_likes.count %> ここ、いいね！
      <% end %>
    </li>
  <% elsif @spot.guest_liked_by?(@guest) %>
    <li>
      <%= link_to destroy_spot_guest_likes_path(@spot, spot_id: @spot.id) do %>
      <span class="button">ここ良いね！</span>
        <i class="fa fa-heart" aria-hidden="true" style="color: red;"></i>
        <%= @spot.spot_likes.count %>
      <% end %>
    </li>
  <% else %>
    <li>
      <%= link_to create_spot_guest_likes_path(@spot, spot_id: @spot.id) do %>
      <span class="button">ここ良いね！</span>
        <i class="fa fa-heart-o" aria-hidden="true"></i>
        <%= @spot.spot_likes.count %>
      <% end %>
    </li>
  <% end %>

<% end %>